{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\n\nvar _reactOnclickoutside = _interopRequireDefault(require(\"react-onclickoutside\"));\n\nvar _check = _interopRequireDefault(require(\"react-icons/lib/md/check\"));\n\nvar _checkCircle = _interopRequireDefault(require(\"react-icons/lib/md/check-circle\"));\n\nvar _close = _interopRequireDefault(require(\"react-icons/lib/md/close\"));\n\nvar _KeypadButton = _interopRequireDefault(require(\"./KeypadButton\"));\n\nvar _Display = _interopRequireDefault(require(\"./Display\"));\n\nvar _mediaTemplates = require(\"../styles/media-templates\");\n\nvar _ui = require(\"./ui\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n          var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {};\n\n          if (desc.get || desc.set) {\n            Object.defineProperty(newObj, key, desc);\n          } else {\n            newObj[key] = obj[key];\n          }\n        }\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-wrap: wrap;\\n  flex-grow: 1;\\n  button {\\n    border-bottom: 1px solid #ddd;\\n    border-right: 1px solid #ddd;\\n  }\\n  button:nth-child(3n) {\\n    border-right: none;\\n  }\\n  button:nth-child(-n + 3) {\\n    border-top: 1px solid #ddd;\\n  }\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: space-between;\\n  padding: 2px 5px;\\n  align-items: center;\\n  color: \", \";\\n  background: \", \";\\n  user-select: none;\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  overflow: hidden;\\n  font-size: 1.3em;\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"width: 100%;\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  width: 264px;\\n  \", \" height: 300px;\\n  background: \", \";\\n  transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;\\n  box-shadow: rgba(0, 0, 0, 0.25) 0px 14px 45px,\\n    rgba(0, 0, 0, 0.22) 0px 10px 18px;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}\n\nvar Content = _styledComponents.default.div(_templateObject(), _mediaTemplates.media.mobile(_templateObject2()), function (props) {\n  return props.theme.body.backgroundColor;\n});\n\nvar Label = _styledComponents.default.div(_templateObject3());\n\nvar Header = _styledComponents.default.div(_templateObject4(), function (props) {\n  return props.theme.header.secondaryColor;\n}, function (props) {\n  return props.theme.header.backgroundColor;\n});\n\nvar Keys = _styledComponents.default.div(_templateObject5());\n\nvar KeyPad =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(KeyPad, _Component);\n\n  function KeyPad(props) {\n    var _this;\n\n    _classCallCheck(this, KeyPad);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(KeyPad).call(this, props));\n    _this.state = {\n      input: props.value\n    };\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.keyDown = _this.keyDown.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.cancelLastInsert = _this.cancelLastInsert.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.numericKeys = _toConsumableArray(Array(10).keys());\n    return _this;\n  }\n\n  _createClass(KeyPad, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      document.addEventListener(\"keydown\", this.keyDown);\n    }\n  }, {\n    key: \"componentWillUpdate\",\n    value: function componentWillUpdate(nextProps, nextState) {\n      var input = this.state.input;\n      var _this$props = this.props,\n          sync = _this$props.sync,\n          validation = _this$props.validation,\n          update = _this$props.update;\n\n      if (sync && nextState.input !== input && validation(nextState.input)) {\n        update(nextState.input);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.removeEventListener(\"keydown\", this.keyDown);\n    }\n  }, {\n    key: \"handleClickOutside\",\n    value: function handleClickOutside(evt) {\n      evt.preventDefault();\n      evt.stopPropagation();\n      var _this$props2 = this.props,\n          validation = _this$props2.validation,\n          confirm = _this$props2.confirm,\n          cancel = _this$props2.cancel;\n      var input = this.state.input;\n\n      if (validation(input)) {\n        confirm(input);\n      } else {\n        cancel();\n      }\n    }\n  }, {\n    key: \"cancelLastInsert\",\n    value: function cancelLastInsert() {\n      this.setState(function (prevState) {\n        return {\n          input: prevState.input.slice(0, -1)\n        };\n      });\n    }\n  }, {\n    key: \"keyDown\",\n    value: function keyDown(event) {\n      event.preventDefault();\n      var key = event.key;\n      var input = this.state.input;\n      var _this$props3 = this.props,\n          confirm = _this$props3.confirm,\n          cancel = _this$props3.cancel,\n          validation = _this$props3.validation;\n\n      if ([\"Enter\", \"Tab\"].includes(key) && validation(input)) {\n        confirm(input);\n      } else if (key === \"Backspace\") {\n        this.cancelLastInsert();\n      } else if ([\"Escape\", \"Tab\"].includes(key)) {\n        cancel();\n      } else if (this.numericKeys.includes(parseInt(key, 10)) || key === \".\" || key === \"-\") {\n        this.handleClick(key);\n      }\n    }\n  }, {\n    key: \"handleClick\",\n    value: function handleClick(key) {\n      if (this.props.keyValid(this.state.input, key, this.props.dateFormat)) {\n        if (key === \"-\") {\n          this.setState(function (prevState) {\n            return {\n              input: prevState.input.charAt(0) === \"-\" ? prevState.input.substr(1) : \"-\".concat(prevState.input)\n            };\n          });\n        } else {\n          this.setState(function (prevState) {\n            return {\n              input: prevState.input + key\n            };\n          });\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props4 = this.props,\n          displayRule = _this$props4.displayRule,\n          validation = _this$props4.validation,\n          label = _this$props4.label,\n          confirm = _this$props4.confirm,\n          cancel = _this$props4.cancel,\n          theme = _this$props4.theme,\n          keyValid = _this$props4.keyValid,\n          dateFormat = _this$props4.dateFormat;\n      return _react.default.createElement(Content, null, _react.default.createElement(Header, null, _react.default.createElement(_ui.NButton, {\n        onClick: cancel\n      }, _react.default.createElement(_close.default, null)), _react.default.createElement(Label, null, label), _react.default.createElement(_ui.NButton, {\n        onClick: function onClick() {\n          return confirm(_this2.state.input);\n        },\n        disabled: !validation(this.state.input)\n      }, validation(this.state.input) ? _react.default.createElement(_checkCircle.default, null) : _react.default.createElement(_check.default, null))), _react.default.createElement(_Display.default, {\n        value: this.state.input,\n        displayRule: displayRule,\n        dateFormat: dateFormat,\n        cancel: this.cancelLastInsert\n      }), _react.default.createElement(Keys, null, [7, 8, 9, 4, 5, 6, 1, 2, 3, \"-\", 0, \".\"].map(function (key) {\n        return _react.default.createElement(_KeypadButton.default, {\n          key: \"button-\".concat(key),\n          theme: theme,\n          click: function click(clickedKey) {\n            return _this2.handleClick(clickedKey);\n          },\n          value: key,\n          disabled: !keyValid(_this2.state.input, key, dateFormat)\n        });\n      })));\n    }\n  }]);\n\n  return KeyPad;\n}(_react.Component);\n\nKeyPad.displayName = \"KeyPad\";\nKeyPad.propTypes = {\n  label: _propTypes.default.string,\n  theme: _propTypes.default.string,\n  confirm: _propTypes.default.func.isRequired,\n  update: _propTypes.default.func.isRequired,\n  cancel: _propTypes.default.func.isRequired,\n  displayRule: _propTypes.default.func.isRequired,\n  validation: _propTypes.default.func.isRequired,\n  keyValid: _propTypes.default.func.isRequired,\n  dateFormat: _propTypes.default.string,\n  value: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string]),\n  sync: _propTypes.default.bool.isRequired\n};\nKeyPad.defaultProps = {\n  label: undefined,\n  theme: undefined,\n  dateFormat: \"MM/DD/YYYY\",\n  value: \"\"\n};\n\nvar _default = (0, _reactOnclickoutside.default)(KeyPad);\n\nexports.default = _default;","map":null,"metadata":{},"sourceType":"script"}